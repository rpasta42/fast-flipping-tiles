<html>
<head>
   <title>Welcome to BusinessCape/FamilyCape</title>
   <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js'></script>

   <script>
      $(function() {
         $('#left-tile').click(function() {
            window.location = 'http://businesscape.com/';
         });
         $('#right-tile').click(function() {
            window.location = 'https://familycape.com/';
         });

         var cName = 'unhovered-tile';
         $('.my-tile').hover(function() {
            if ($(this).attr('id') == 'left-tile')
               $('#right-tile').addClass(cName);
            else $('#left-tile').addClass(cName);

         }, function() {
            $('.my-tile').removeClass(cName);
         });
      });
   </script>

   <style>
      #left-tile {
         position:      absolute;
         background-color:    /*#5bc0de;*/ #fafafa;
         border-top-right-radius:    0;
         border-bottom-right-radius:    0;
      }
      #right-tile {
         background-color: #fafafa;    /*#f1c954; #0e9d57;*/
         position:      absolute;
         left:          50%;
         border-top-left-radius:    0;
         border-bottom-left-radius:    0;
      }
      .my-tile {
         width:         50%;
         height:        90%;
         border-radius: 10px;
         text-align:    center;
         overflow:      hidden;
         /*opacity:       0.9;
         filter:        blur(3px);*/
      }
      .unhovered-tile {
         opacity:       0.9;
         filter:        blur(3px);
      }
      .my-tile:hover {
         /*opacity: 1;
         filter:  none;*/
         cursor:  pointer;
      }

      body {
         /*padding:       0;
         margin:        0;*/
         margin:        40px;
         /*background-color:    #f1c954;*/
         background-color:    #eeeeee;
      }
      #tile-container {
         position:      relative;
         width:         100%;
         height:        100%;
      }
      .tile-img {
         width:         100%;
         height:        100%;
      }
      #left-img-bottom {
         height:        20px;
      }
      #right-img-top, #left-img-top {
         /*width:         558px;
         height:        200px;*/
         max-height:    200px;
         max-width:     558px;
         width:         90%;
      }
      #left-img-bottom, #right-img-bottom {
         height:        100%;
      }
      #left-img-top, #right-img-top {
         margin:        8px;
         padding:       8px;
      }
   </style>

   <style>
      @keyframes rotate-y-forward-90 {
         from {transform: rotateY(0deg);}
         to   {transform: rotateY(90deg);}
      }
      @keyframes rotate-y-backwards-90 {
         from {transform: rotateY(90deg);}
         to   {transform: rotateY(0deg);}
      }
   </style>

   <script>
      var tileRotTime = 0.5;
      var tileRotTimeMilli = tileRotTime * 1000;

      function animate(el, animationName, duration) {
         el.css('animation-name', animationName);
         el.css('animation-duration', duration + 's');
         el.css('animation-fill-mode', 'forwards');
      }

      $(function() {

         $('.my-tile').find('.tile-front').show();
         $('.my-tile').find('.tile-back').hide();

         //old
         //inactive = default
         //rotating90 = started rotation
         //rotating180 = finsihed half rotation
         //flipped_start = just finished flipping, need to wait before rotating back
         //flipped_ready = waited minimum amount, ready to rotate back
         //reversing = rotating back
         //inactive/finished = either use separate state, or just revert to inactive
         //status of rotation
         //(inactive, rotating90, rotating180, flipped_start, flipped-ready, reversing, inactive/finished)

         //new statuses = [inactive, flipped-ready]
         var tileState = { 'left-tile':'inactive', 'right-tile':'inactive' };

         //t = hovered object, tId = 'left-tile' or 'right-tile'
         function onMoveIn(t, tId, front, back) {
            if (tileState[tId] != 'inactive')
               return;

            animate(front, 'rotate-y-forward-90', tileRotTime);

            setTimeout(function() {
               front.hide();
               back.show();
               animate(back, 'rotate-y-backwards-90', tileRotTime);
               setTimeout(function() { tileState[tId] = 'flipped-ready'; }, tileRotTimeMilli);
            }, tileRotTimeMilli);
         }
         function onMoveOut(t, tId, front, back) {
            if (tileState[tId] != 'flipped-ready') {
               setTimeout(function () { onMoveOut(t, tId, front, back); }, 400);
               return;
            }

            animate(back, 'rotate-y-forward-90', tileRotTime);

            setTimeout(function() {
               back.hide();
               front.show();
               animate(front, 'rotate-y-backwards-90', tileRotTime);
               setTimeout(function() { tileState[tId] = 'inactive'; }, tileRotTimeMilli);

            }, tileRotTimeMilli);
         }

         function onTileHover(obj, isHoverIn) {
            var objId = $(obj).attr('id');
            var back = $(obj).find('.tile-back');
            var front = $(obj).find('.tile-front');
            if (isHoverIn)
               onMoveIn(obj, objId, front, back);
            else
               onMoveOut(obj, objId, front, back);
         }

         $('.my-tile').hover(function() {
            onTileHover($(this), true);
         }, function() {
            onTileHover($(this), false);
         });
      });
   </script>
</head>
<body>

   <center style='color:#8495a1'>Select website to continue</center></br>

   <div id='tile-container'>
      <div id='left-tile' class='my-tile'>
         <!-- <img class='tile-img' id='left-img' src='../assets/businesscape1.png'> -->
         <div class='tile-front'>
            <img class='tile-img' id='left-img-top' src='../assets/familycape/split-select/logo-businesscape.png'>
            <img class='tile-img' id='left-img-bottom' src='../assets/familycape/split-select/bus_scrot.png'>
         </div>
         <div class='tile-back'>
            Left side
         </div>
      </div>

      <div id='right-tile' class='my-tile'>
         <div class='tile-front'>
            <!-- <img class='tile-img' id='right-img' src='../assets/familydebt1.png'> -->
            <img class='tile-img' id='right-img-top' src='../assets/familycape/logo.png'>
            <img class='tile-img' id='right-img-bottom' src='../assets/familycape/split-select/fam_scrot.png'>
         </div>
         <div class='tile-back'>
            Right side
         </div>
      </div>
   </div>
</body>
</html>

